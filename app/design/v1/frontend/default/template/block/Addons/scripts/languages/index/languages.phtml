<?php 
    $locale = App::locale();
    $current_language = $locale->getLang();
    $default_language = $locale->getDefault();

    foreach ($this->languages AS $language) :
      $class = ($current_language == $language['prefix']) ? " language-current" : null ;
      $url   = ($default_language == $language['prefix']) ? App::www('') : App::www('/' . $language['prefix']);
    ?>
        <h1 class="icons <?=$language['prefix'] . $class?>" title="<?=$language['name']?>">
            <a href="<?=$url?>">
                <?=$language['name']?>
            </a>
        </h1>
    <?php endforeach;?>

<?php
/*
 * $this->languages
    [0] => Array
        (
            [id] => 1
            [name] => EspaÃ±ol
            [prefix] => es
            [namespace] => es_MX
            [status] => enabled
        )
 */
?>